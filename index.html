<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charity: water Pipe Tetris</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="img/cw_logo.png">
    <style>
        .visually-hidden {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0,0,0,0);
            border: 0;
        }
        #loading-message {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255,255,255,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: #2E9DF7;
            z-index: 200;
        }
        #game-over-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(46,157,247,0.85);
            color: #fff;
            font-size: 2.2rem;
            font-weight: bold;
            align-items: center;
            justify-content: center;
            z-index: 150;
            flex-direction: column;
        }
        #game-over-overlay.active {
            display: flex;
        }
        #instructions {
            background: #fff;
            border: 2px solid #2E9DF7;
            border-radius: 10px;
            padding: 1rem 2rem;
            margin: 1rem auto 1.5rem auto;
            max-width: 420px;
            color: #222;
            font-size: 1.1rem;
            box-shadow: 0 2px 8px rgba(46,157,247,0.10);
        }
    </style>
</head>
<body>
    <h1 class="visually-hidden">Charity: water Pipe Tetris Game</h1>
    <div id="loading-message">Loading Charity: water Tetris...</div>
    <header>
        <img src="img/cw_logo_horizontal.png" alt="Charity: water logo" style="max-width:220px; vertical-align:middle;">
        <h1>Charity: water Pipe Tetris</h1>
    </header>
    <div id="instructions" tabindex="0">
        <strong>How to Play:</strong><br>
        Use <b>Arrow keys</b> to move and rotate pieces.<br>
        <b>Space</b> to drop, <b>Enter</b> to restart after game over.<br>
        Clear lines to deliver clean water and unlock fun facts!
    </div>
    <main>
        <div id="game-container">
            <canvas id="tetris" width="300" height="600" aria-label="Tetris game board" tabindex="0"></canvas>
            <div id="sidebar">
                <h2 id="water-delivered">Liters Delivered: 0</h2>
                <div id="level-display" style="background:#fff;border:2px solid #FFC907;border-radius:8px;padding:0.5rem 1.2rem;font-size:1.1rem;text-align:center;margin-bottom:1rem;">Level: 1</div>
                <button id="restart" aria-label="Restart game" tabindex="0">Restart</button>
                <div id="next-piece">
                    <h3>Next Piece</h3>
                    <canvas id="next" width="100" height="100" aria-label="Next Tetris piece" tabindex="0"></canvas>
                </div>
            </div>
        </div>
        <div id="fact-popup">
            <p id="fact-text"></p>
            <button id="close-fact" aria-label="Close fact popup" tabindex="0">OK</button>
        </div>
        <div id="game-over-overlay">
            <div>Game Over!<br><span id="final-liters"></span></div>
            <button id="overlay-restart" tabindex="0">Restart</button>
        </div>
        <div id="splash-effect" aria-hidden="true"></div>
    </main>
    <footer>
        <p>Made for learning and fun &mdash; <a href="https://www.charitywater.org/" target="_blank" rel="noopener">Charity: water</a></p>
    </footer>
    <script>
        // Hide loading message when page and scripts are ready
        window.addEventListener('DOMContentLoaded', function() {
            document.getElementById('loading-message').style.display = 'none';
        });
    </script>
    <script src="script.js"></script>
</body>
</html>
